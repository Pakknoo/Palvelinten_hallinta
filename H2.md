## x)Tiivistelmät


## a) Asenna kaksi virtuaalikonetta samaan verkkoon. Osoita, että pystyt käyttämään kumpaakin konetta (esim 'vagrant ssh t001'). Osoita, että koneet voivat pingata toisiaan. (Tämä tehtävä on helpointa tehdä Vagrantilla)

Loin ensin kotikansiooni uuden kansion palvelinten_hallinta_h2. Tämän jälkeen siirryin luomaani kansioon ja annoin komennon Vagrant init debian/bullseye64. Komento luo vagrant-tiedoston (vagrantfile) kansioon. Kävin muokkaamassa tiedostoa tehtävänannon mukaisesti. 
![Vagrantfile](https://github.com/Pakknoo/Palvelinten_hallinta/assets/122889266/739d13ac-74c7-416a-8499-271ef8ef47dd)

Tämän jälkeen komento vagrant up luo kaksi virtuaalikonetta. Sain huomautuksen, että vagrantfilessa olevat ip-osoitteet eivät ole kelvollisia, joten kävin muokkaamassa molempien koneiden ip-osoitteita. 
![error](https://github.com/Pakknoo/Palvelinten_hallinta/assets/122889266/06b7a881-c327-48f2-a5d1-11e066080f3e)
Muokkaamisen jälkeen vagrant up -komento loi virtuaalikoneet.
![vagrantfile_muokkaus](https://github.com/Pakknoo/Palvelinten_hallinta/assets/122889266/cc3df2ba-b0a2-4961-8c5f-1056d5591daa)

Tämän jälkeen vagrant ssh -komennolla pääsin sisälle molempiin virtuaalikoneisiin.
![ssh1](https://github.com/Pakknoo/Palvelinten_hallinta/assets/122889266/8a149c78-0df7-47e8-870d-e9578bffd282)


![ssh2](https://github.com/Pakknoo/Palvelinten_hallinta/assets/122889266/344114fb-48a6-4b82-a459-3abb88107f35)

Pystyin myös pingaamaan molempia koneita. 
![ping1](https://github.com/Pakknoo/Palvelinten_hallinta/assets/122889266/db06f65d-9f04-406f-931b-c8381703b6e0)

![ping2](https://github.com/Pakknoo/Palvelinten_hallinta/assets/122889266/a9971965-a5a9-40d5-a51b-21ae1cb564d6)



## b) Asenna Saltin herra-orja arkkitehtuuri toimimaan verkon yli. (Verkko voi olla virtuaalinen verkko paikallisten virtuaalikoneiden välillä, kuten muissakin alakohdissa)

Kirjauduin komennolla vagrant ssh t001 koneelle t001 ja päivitin ensin paketit komennolla sudo apt-get update, jonka jälkeen asensin salt masterin komennolla sudo apt-get install salt-master.

![master_version](https://github.com/Pakknoo/Palvelinten_hallinta/assets/122889266/399ca5cd-eb05-4e2b-a2f8-dfc4e7d14d0c)

Tämän jälkeen siirryin koneelle t002, jossa aluksi päivitin paketit ja asensin salt-minionin konennolla sudo apt-get install salt-minion. 

![minion_version](https://github.com/Pakknoo/Palvelinten_hallinta/assets/122889266/4de404e0-ea99-4e54-93fa-c32f69b4cf96)

Tämän jälkeen muokkasin salt-minion tiedostoa komennolla sudoedit /etc/salt/minion. 

![sudoedit_salt_minion](https://github.com/Pakknoo/Palvelinten_hallinta/assets/122889266/dfd83f1d-a3d8-4f77-a941-12f5816805c2)

Käynnistin demonin komennolla sudo systemctl restart salt-minion.service. 
Sitten siirryin herran puolelle (kone t001), missä annan komennon sudo-salt-key -A eli hyväksyn orjan isännän minioniksi. 

![key](https://github.com/Pakknoo/Palvelinten_hallinta/assets/122889266/46dbf64f-8913-4efb-9e6f-e2266084e060)

Varmistin vielä, että avain oli hyväksytty:


![key2](https://github.com/Pakknoo/Palvelinten_hallinta/assets/122889266/7b58ed8c-8536-4a57-85cc-c5b905e6f294)


## c) Aja shell-komento orjalla Saltin master-slave yhteyden yli.

Asensin herralla (t001) orjalle micron komennolla:

      sudo salt '*' state.single pkg.installed micro

![micro_asennus1](https://github.com/Pakknoo/Palvelinten_hallinta/assets/122889266/350836d7-bbd4-40fe-af0b-181be5571947)

![micro_asennus2](https://github.com/Pakknoo/Palvelinten_hallinta/assets/122889266/b125e3d8-7217-48d4-8ed6-0543785f1239)

Tarkistin vielä orja-koneella, että micro oli asentunut. 


![micro_version](https://github.com/Pakknoo/Palvelinten_hallinta/assets/122889266/3d83cbc4-7c33-47dd-b8bf-9513f866bbb6)

## d) Aja useita idempotentteja (state.single) komentoja master-slave yhteyden yli.

## e) Kerää teknistä tietoa orjista verkon yli (grains.item)

## f) Hello, IaC. Tee infraa koodina kirjoittamalla /srv/salt/hello/init.sls. Aja tila jollekin orjalle. Tila voi esimerkiksi tehdä esimerkkitiedoston johonkin hakemistoon. Testaa toisella komennolla, että pyytämäsi muutos on todella tehty.
